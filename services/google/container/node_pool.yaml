# Copyright 2021 Google LLC. All Rights Reserved.
# 
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
# 
#     http://www.apache.org/licenses/LICENSE-2.0
# 
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
components:
  schemas:
    NodePool:
      properties:
        autoscaling:
          description: 'Autoscaler configuration for this NodePool. Autoscaler is
            enabled only if a valid configuration is present. '
          properties:
            autoprovisioned:
              description: Can this node pool be automatically deleted.
              type: boolean
              x-dcl-go-name: Autoprovisioned
            enabled:
              description: Is autoscaling enabled for this node pool.
              type: boolean
              x-dcl-go-name: Enabled
            maxNodeCount:
              description: 'Maximum number of nodes in the NodePool. Must be >= minNodeCount.
                There has to enough quota to scale up the cluster. '
              format: int64
              type: integer
              x-dcl-go-name: MaxNodeCount
            minNodeCount:
              description: 'Minimum number of nodes in the NodePool. Must be >= 1
                and <= maxNodeCount. '
              format: int64
              type: integer
              x-dcl-go-name: MinNodeCount
          type: object
          x-dcl-conflicts:
          - nodeCount
          x-dcl-go-name: Autoscaling
          x-dcl-go-type: NodePoolAutoscaling
        cluster:
          description: The cluster this node pool belongs to.
          type: string
          x-dcl-go-name: Cluster
          x-dcl-references:
          - field: name
            parent: true
            resource: Container/Cluster
          x-kubernetes-immutable: true
        conditions:
          description: Which conditions caused the current node pool state.
          items:
            properties:
              code:
                description: Machine-friendly representation of the condition
                enum:
                - UNKNOWN
                - GCE_STOCKOUT
                - GKE_SERVICE_ACCOUNT_DELETED
                - GCE_QUOTA_EXCEEDED
                - SET_BY_OPERATOR
                readOnly: true
                type: string
                x-dcl-go-name: Code
                x-dcl-go-type: NodePoolConditionsCodeEnum
                x-kubernetes-immutable: true
              message:
                description: Human-friendly representation of the condition
                readOnly: true
                type: string
                x-dcl-go-name: Message
                x-kubernetes-immutable: true
            type: object
            x-dcl-go-type: NodePoolConditions
          readOnly: true
          type: array
          x-dcl-go-name: Conditions
          x-dcl-list-type: list
          x-kubernetes-immutable: true
        config:
          description: The node configuration of the pool.
          properties:
            accelerators:
              description: A list of hardware accelerators to be attached to each
                node
              items:
                properties:
                  acceleratorCount:
                    description: The number of the accelerator cards exposed to an
                      instance.
                    format: int64
                    type: integer
                    x-dcl-go-name: AcceleratorCount
                    x-kubernetes-immutable: true
                  acceleratorType:
                    description: The accelerator type resource name
                    type: string
                    x-dcl-go-name: AcceleratorType
                    x-kubernetes-immutable: true
                type: object
                x-dcl-go-type: NodePoolConfigAccelerators
              type: array
              x-dcl-go-name: Accelerators
              x-dcl-list-type: list
              x-kubernetes-immutable: true
            diskSizeGb:
              description: 'Size of the disk attached to each node, specified in GB.
                The smallest allowed disk size is 10GB. If unspecified, the default
                disk size is 100GB. '
              format: int64
              type: integer
              x-dcl-go-name: DiskSizeGb
              x-kubernetes-immutable: true
            diskType:
              description: 'Type of the disk attached to each node (e.g. ''pd-standard''
                or ''pd-ssd'')  If unspecified, the default disk type is ''pd-standard'' '
              type: string
              x-dcl-go-name: DiskType
              x-kubernetes-immutable: true
            imageType:
              description: 'The image type to use for this node.  Note that for a
                given image type, the latest version of it will be used. '
              type: string
              x-dcl-go-name: ImageType
            labels:
              additionalProperties:
                type: string
              description: 'The map of Kubernetes labels (key/value pairs) to be applied
                to each node. These will added in addition to any default label(s)
                that Kubernetes may apply to the node. In case of conflict in label
                keys, the applied set may differ depending on the Kubernetes version
                -- it''s best to assume the behavior is undefined and conflicts should
                be avoided. For more information, including usage and the valid values,
                see:   http://kubernetes.io/v1.1/docs/user-guide/labels.html  An object
                containing a list of "key": value pairs. Example: { "name": "wrench",
                "mass": "1.3kg", "count": "3" }. '
              type: object
              x-dcl-go-name: Labels
              x-kubernetes-immutable: true
            localSsdCount:
              description: 'The number of local SSD disks to be attached to the node.  The
                limit for this value is dependant upon the maximum number of disks
                available on a machine per zone. See:  https://cloud.google.com/compute/docs/disks/local-ssd#local_ssd_limits  for
                more information. '
              format: int64
              type: integer
              x-dcl-go-name: LocalSsdCount
              x-kubernetes-immutable: true
            machineType:
              description: 'The name of a Google Compute Engine machine type (e.g.
                n1-standard-1).  If unspecified, the default machine type is n1-standard-1. '
              type: string
              x-dcl-go-name: MachineType
              x-kubernetes-immutable: true
            metadata:
              additionalProperties:
                type: string
              description: 'The metadata key/value pairs assigned to instances in
                the cluster.  Keys must conform to the regexp [a-zA-Z0-9-_]+ and be
                less than 128 bytes in length. These are reflected as part of a URL
                in the metadata server. Additionally, to avoid ambiguity, keys must
                not conflict with any other metadata keys for the project or be one
                of the four reserved keys: "instance-template", "kube-env", "startup-script",
                and "user-data"  Values are free-form strings, and only have meaning
                as interpreted by the image running in the instance. The only restriction
                placed on them is that each value''s size must be less than or equal
                to 32 KB.  The total size of all keys and values must be less than
                512 KB.  An object containing a list of "key": value pairs. Example:
                { "name": "wrench", "mass": "1.3kg", "count": "3" }. '
              type: object
              x-dcl-go-name: Metadata
              x-kubernetes-immutable: true
            minCpuPlatform:
              description: 'Minimum CPU platform to be used by this instance. The
                instance may be scheduled on the specified or newer CPU platform '
              type: string
              x-dcl-go-name: MinCpuPlatform
              x-kubernetes-immutable: true
            oauthScopes:
              description: 'The set of Google API scopes to be made available on all
                of the node VMs under the "default" service account.  The following
                scopes are recommended, but not required, and by default are not included:  https://www.googleapis.com/auth/compute
                is required for mounting persistent storage on your nodes. https://www.googleapis.com/auth/devstorage.read_only
                is required for communicating with gcr.io (the Google Container Registry).  If
                unspecified, no scopes are added, unless Cloud Logging or Cloud Monitoring
                are enabled, in which case their required scopes will be added. '
              items:
                type: string
                x-dcl-go-type: string
              type: array
              x-dcl-go-name: OAuthScopes
              x-dcl-list-type: list
              x-kubernetes-immutable: true
            preemptible:
              description: 'Whether the nodes are created as preemptible VM instances.
                See: https://cloud.google.com/compute/docs/instances/preemptible for
                more information about preemptible VM instances. '
              type: boolean
              x-dcl-go-name: Preemptible
              x-kubernetes-immutable: true
            reservationAffinity:
              description: The optional reservation affinity. Setting this field will
                apply the specified Zonal Compute Reservation to this node pool.
              properties:
                consumeReservationType:
                  description: Corresponds to the type of reservation consumption.
                  enum:
                  - NO_RESERVATION
                  - ANY_RESERVATION
                  - SPECIFIC_RESERVATION
                  type: string
                  x-dcl-go-name: ConsumeReservationType
                  x-dcl-go-type: NodePoolConfigReservationAffinityConsumeReservationTypeEnum
                  x-kubernetes-immutable: true
                key:
                  description: Corresponds to the label key of reservation resource.
                  type: string
                  x-dcl-go-name: Key
                  x-kubernetes-immutable: true
                values:
                  description: Corresponds to the label value(s) of reservation resource(s).
                  items:
                    type: string
                    x-dcl-go-type: string
                  type: array
                  x-dcl-go-name: Values
                  x-dcl-list-type: list
                  x-kubernetes-immutable: true
              type: object
              x-dcl-go-name: ReservationAffinity
              x-dcl-go-type: NodePoolConfigReservationAffinity
              x-kubernetes-immutable: true
            sandboxConfig:
              description: Sandbox configuration for this node.
              properties:
                type:
                  description: Type of the sandbox to use for the node
                  enum:
                  - GVISOR
                  type: string
                  x-dcl-go-name: Type
                  x-dcl-go-type: NodePoolConfigSandboxConfigTypeEnum
                  x-kubernetes-immutable: true
              type: object
              x-dcl-go-name: SandboxConfig
              x-dcl-go-type: NodePoolConfigSandboxConfig
              x-kubernetes-immutable: true
            serviceAccount:
              description: 'The Google Cloud Platform Service Account to be used by
                the node VMs.  If no Service Account is specified, the "default" service
                account is used. '
              type: string
              x-dcl-go-name: ServiceAccount
              x-kubernetes-immutable: true
            shieldedInstanceConfig:
              description: A set of Shielded Instance options.
              properties:
                enableIntegrityMonitoring:
                  description: Defines whether the instance has integrity monitoring
                    enabled. Enables monitoring and attestation of the boot integrity
                    of the instance. The attestation is performed against the integrity
                    policy baseline. This baseline is initially derived from the implicitly
                    trusted boot image when the instance is created.
                  type: boolean
                  x-dcl-go-name: EnableIntegrityMonitoring
                  x-kubernetes-immutable: true
                enableSecureBoot:
                  description: Defines whether the instance has Secure Boot enabled.
                    Secure Boot helps ensure that the system only runs authentic software
                    by verifying the digital signature of all boot components, and
                    halting the boot process if signature verification fails.
                  type: boolean
                  x-dcl-go-name: EnableSecureBoot
                  x-kubernetes-immutable: true
              type: object
              x-dcl-go-name: ShieldedInstanceConfig
              x-dcl-go-type: NodePoolConfigShieldedInstanceConfig
              x-kubernetes-immutable: true
            tags:
              description: 'The list of instance tags applied to all nodes. Tags are
                used to identify valid sources or targets for network firewalls and
                are specified by the client during cluster or node pool creation.
                Each tag within the list must comply with RFC1035. '
              items:
                type: string
                x-dcl-go-type: string
              type: array
              x-dcl-go-name: Tags
              x-dcl-list-type: list
              x-kubernetes-immutable: true
            taints:
              description: List of kubernetes taints to be applied to each node.
              items:
                properties:
                  effect:
                    description: Effect for taint
                    type: string
                    x-dcl-go-name: Effect
                    x-kubernetes-immutable: true
                  key:
                    description: Key for taint
                    type: string
                    x-dcl-go-name: Key
                    x-kubernetes-immutable: true
                  value:
                    description: Value for taint
                    type: string
                    x-dcl-go-name: Value
                    x-kubernetes-immutable: true
                type: object
                x-dcl-go-type: NodePoolConfigTaints
              type: array
              x-dcl-go-name: Taints
              x-dcl-list-type: list
              x-kubernetes-immutable: true
          type: object
          x-dcl-go-name: Config
          x-dcl-go-type: NodePoolConfig
          x-kubernetes-immutable: true
        location:
          description: The location where the node pool is deployed
          type: string
          x-dcl-go-name: Location
          x-kubernetes-immutable: true
        locations:
          description: The location where the node pool is deployed
          items:
            type: string
            x-dcl-go-type: string
          type: array
          x-dcl-go-name: Locations
          x-dcl-list-type: list
        management:
          description: Management configuration for this NodePool.
          properties:
            autoRepair:
              description: 'A flag that specifies whether the node auto-repair is
                enabled for the node pool. If enabled, the nodes in this node pool
                will be monitored and, if they fail health checks too many times,
                an automatic repair action will be triggered. '
              type: boolean
              x-dcl-go-name: AutoRepair
            autoUpgrade:
              description: 'A flag that specifies whether node auto-upgrade is enabled
                for the node pool. If enabled, node auto-upgrade helps keep the nodes
                in your node pool up to date with the latest release version of Kubernetes. '
              type: boolean
              x-dcl-go-name: AutoUpgrade
            upgradeOptions:
              description: Specifies the Auto Upgrade knobs for the node pool.
              properties:
                autoUpgradeStartTime:
                  description: 'This field is set when upgrades are about to commence
                    with the approximate start time for the upgrades, in RFC3339 text
                    format. '
                  format: date-time
                  readOnly: true
                  type: string
                  x-dcl-go-name: AutoUpgradeStartTime
                  x-kubernetes-immutable: true
                description:
                  description: 'This field is set when upgrades are about to commence
                    with the description of the upgrade. '
                  readOnly: true
                  type: string
                  x-dcl-go-name: Description
                  x-kubernetes-immutable: true
              type: object
              x-dcl-go-name: UpgradeOptions
              x-dcl-go-type: NodePoolManagementUpgradeOptions
          type: object
          x-dcl-go-name: Management
          x-dcl-go-type: NodePoolManagement
        maxPodsConstraint:
          description: 'The constraint on the maximum number of pods that can be run
            simultaneously on a node in the node pool. '
          properties:
            maxPodsPerNode:
              description: Constraint enforced on the max num of pods per node.
              format: int64
              type: integer
              x-dcl-go-name: MaxPodsPerNode
              x-kubernetes-immutable: true
          type: object
          x-dcl-go-name: MaxPodsConstraint
          x-dcl-go-type: NodePoolMaxPodsConstraint
          x-kubernetes-immutable: true
        name:
          description: The name of the node pool.
          type: string
          x-dcl-go-name: Name
          x-kubernetes-immutable: true
        nodeCount:
          description: 'The node count for the pool. You must ensure that your Compute
            Engine resource quota is sufficient for this number of instances. You
            must also have available firewall and routes quota. '
          format: int64
          type: integer
          x-dcl-conflicts:
          - autoscaling
          x-dcl-go-name: NodeCount
        podIPv4CidrSize:
          description: The pod CIDR block size per node in this node pool.
          format: int64
          readOnly: true
          type: integer
          x-dcl-go-name: PodIPv4CidrSize
          x-kubernetes-immutable: true
        project:
          description: The project id of the resource.
          type: string
          x-dcl-go-name: Project
          x-kubernetes-immutable: true
        status:
          description: The current status of this cluster.
          readOnly: true
          type: string
          x-dcl-go-name: Status
          x-kubernetes-immutable: true
        statusMessage:
          description: Any message associated with the current status of this cluster
          readOnly: true
          type: string
          x-dcl-go-name: StatusMessage
          x-kubernetes-immutable: true
        upgradeSettings:
          description: Upgrade settings control disruption and speed of the upgrade.
          properties:
            maxSurge:
              description: The maximum number of nodes that can be created beyond
                the current size of the node pool during the upgrade process.
              format: int64
              type: integer
              x-dcl-go-name: MaxSurge
              x-kubernetes-immutable: true
            maxUnavailable:
              description: The maximum number of nodes that can be simultaneously
                unavailable during the upgrade process. A node is considered available
                if its status is Ready.
              format: int64
              type: integer
              x-dcl-go-name: MaxUnavailable
              x-kubernetes-immutable: true
          type: object
          x-dcl-go-name: UpgradeSettings
          x-dcl-go-type: NodePoolUpgradeSettings
          x-kubernetes-immutable: true
        version:
          description: The version of the Kubernetes of this node.
          type: string
          x-dcl-go-name: Version
          x-kubernetes-immutable: true
      required:
      - name
      - cluster
      - project
      - location
      title: NodePool
      type: object
      x-dcl-id: projects/{{project}}/locations/{{location}}/clusters/{{cluster}}/nodePools/{{name}}
      x-dcl-labels: config.labels
      x-dcl-locations: []
      x-dcl-parent-container: project
      x-dcl-uses-state-hint: false
info:
  description: DCL Specification for the Container NodePool resource
  title: Container/NodePool
  x-dcl-has-iam: false
paths:
  list:
    description: The function called used to list information about many NodePool
    parameters:
    - name: project
      required: true
    - name: location
      required: true
    - name: cluster
      required: true
