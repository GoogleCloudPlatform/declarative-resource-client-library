# Copyright 2021 Google LLC. All Rights Reserved.
# 
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
# 
#     http://www.apache.org/licenses/LICENSE-2.0
# 
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
components:
  schemas:
    Workload:
      properties:
        billingAccount:
          description: Required. Input only. The billing account used for the resources
            which are direct children of workload. This billing account is initially
            associated with the resources created as part of Workload creation. After
            the initial creation of these resources, the customer can change the assigned
            billing account. The resource name has the form `billingAccounts/{billing_account_id}`.
            For example, 'billingAccounts/012345-567890-ABCDEF`.
          type: string
          x-dcl-go-name: BillingAccount
          x-dcl-mutable-unreadable: true
          x-dcl-references:
          - field: name
            reference: billingAccount
          x-kubernetes-immutable: true
        complianceRegime:
          description: 'Required. Immutable. Compliance Regime associated with this
            workload. Possible values: COMPLIANCE_REGIME_UNSPECIFIED, IL4, CJIS, FEDRAMP_HIGH,
            FEDRAMP_MODERATE, US_REGIONAL_ACCESS'
          enum:
          - COMPLIANCE_REGIME_UNSPECIFIED
          - IL4
          - CJIS
          - FEDRAMP_HIGH
          - FEDRAMP_MODERATE
          - US_REGIONAL_ACCESS
          type: string
          x-dcl-go-name: ComplianceRegime
          x-dcl-go-type: WorkloadComplianceRegimeEnum
          x-kubernetes-immutable: true
        createTime:
          description: Output only. Immutable. The Workload creation timestamp.
          format: date-time
          readOnly: true
          type: string
          x-dcl-go-name: CreateTime
          x-kubernetes-immutable: true
        displayName:
          description: 'Required. The user-assigned display name of the Workload.
            When present it must be between 4 to 30 characters. Allowed characters
            are: lowercase and uppercase letters, numbers, hyphen, and spaces. Example:
            My Workload'
          type: string
          x-dcl-go-name: DisplayName
        kmsSettings:
          description: Input only. Settings used to create a CMEK crypto key. When
            set a project with a KMS CMEK key is provisioned. This field is mandatory
            for a subset of Compliance Regimes.
          properties:
            nextRotationTime:
              description: Required. Input only. Immutable. The time at which the
                Key Management Service will automatically create a new version of
                the crypto key and mark it as the primary.
              format: date-time
              type: string
              x-dcl-go-name: NextRotationTime
              x-kubernetes-immutable: true
            rotationPeriod:
              description: Required. Input only. Immutable. will be advanced by this
                period when the Key Management Service automatically rotates a key.
                Must be at least 24 hours and at most 876,000 hours.
              type: string
              x-dcl-go-name: RotationPeriod
              x-kubernetes-immutable: true
          required:
          - nextRotationTime
          - rotationPeriod
          type: object
          x-dcl-go-name: KmsSettings
          x-dcl-go-type: WorkloadKmsSettings
          x-kubernetes-immutable: true
        labels:
          additionalProperties:
            type: string
          description: Optional. Labels applied to the workload.
          type: object
          x-dcl-go-name: Labels
        location:
          description: The location for the resource
          type: string
          x-dcl-go-name: Location
          x-kubernetes-immutable: true
        name:
          description: Output only. The resource name of the workload.
          readOnly: true
          type: string
          x-dcl-go-name: Name
          x-dcl-server-generated-parameter: true
          x-kubernetes-immutable: true
        organization:
          description: The organization for the resource
          type: string
          x-dcl-go-name: Organization
          x-dcl-references:
          - field: name
            parent: true
            reference: organization
          x-kubernetes-immutable: true
        provisionedResourcesParent:
          description: 'Input only. The parent resource for the resources managed
            by this Assured Workload. May be either an organization or a folder. Must
            be the same or a child of the Workload parent. If not specified all resources
            are created under the Workload parent. Formats: folders/{folder_id}, organizations/{organization_id}'
          type: string
          x-dcl-go-name: ProvisionedResourcesParent
          x-kubernetes-immutable: true
        resources:
          description: Output only. The resources associated with this workload. These
            resources will be created when creating the workload. If any of the projects
            already exist, the workload creation will fail. Always read only.
          items:
            properties:
              resourceId:
                description: Resource identifier. For a project this represents project_number.
                format: int64
                type: integer
                x-dcl-go-name: ResourceId
                x-kubernetes-immutable: true
              resourceType:
                description: 'Indicates the type of resource. Possible values: RESOURCE_TYPE_UNSPECIFIED,
                  CONSUMER_PROJECT, ENCRYPTION_KEYS_PROJECT'
                enum:
                - RESOURCE_TYPE_UNSPECIFIED
                - CONSUMER_PROJECT
                - ENCRYPTION_KEYS_PROJECT
                type: string
                x-dcl-go-name: ResourceType
                x-dcl-go-type: WorkloadResourcesResourceTypeEnum
                x-kubernetes-immutable: true
            type: object
            x-dcl-go-type: WorkloadResources
          readOnly: true
          type: array
          x-dcl-go-name: Resources
          x-dcl-list-type: list
          x-kubernetes-immutable: true
      required:
      - displayName
      - complianceRegime
      - billingAccount
      - organization
      - location
      title: Workload
      type: object
      x-dcl-id: organizations/{{organization}}/locations/{{location}}/workloads/{{name}}
      x-dcl-labels: labels
      x-dcl-locations: []
      x-dcl-parent-container: organization
      x-dcl-uses-state-hint: true
info:
  description: DCL Specification for the Assuredworkloads Workload resource
  title: Assuredworkloads/Workload
  x-dcl-has-iam: false
paths:
  apply:
    description: The function used to apply information about a Workload
    parameters:
    - description: A full instance of a Workload
      name: Workload
      required: true
  delete:
    description: The function used to delete a Workload
    parameters:
    - description: A full instance of a Workload
      name: Workload
      required: true
  deleteAll:
    description: The function used to delete all Workload
    parameters:
    - name: organization
      required: true
      schema:
        type: string
    - name: location
      required: true
      schema:
        type: string
  get:
    description: The function used to get information about a Workload
    parameters:
    - description: A full instance of a Workload
      name: Workload
      required: true
  list:
    description: The function used to list information about many Workload
    parameters:
    - name: organization
      required: true
      schema:
        type: string
    - name: location
      required: true
      schema:
        type: string
