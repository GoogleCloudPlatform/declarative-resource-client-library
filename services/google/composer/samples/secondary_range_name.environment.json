{
  "name": "{{environment}}",
  "project": "{{ref:composer.serviceusage.service.json:project}}",
  "location": "{{region}}",
  "config": {
    "nodeCount": 3,
    "softwareConfig": {
      "imageVersion": "composer-1.16.1-airflow-1.10.15",
      "airflowConfigOverrides": {
        "core-dags_are_paused_at_creation": "true"
      },
      "envVariables": {
        "VARIABLE_NAME": "VALUE"
      },
      "pythonVersion": "3"
    },
    "nodeConfig": {
      "location": "{{zone}}",
      "machineType": "e2-medium",
      "network": "{{ref:basic.compute.network.json:selfLink}}",
      "subnetwork": "{{ref:basic.compute.subnetwork.json:selfLink}}",
      "diskSizeGb": 20,
      "oauthScopes": [
        "https://www.googleapis.com/auth/cloud-platform",
        "https://www.googleapis.com/auth/logging.read"
      ],
      "serviceAccount": "{{ref:basic.iam.service_account.json:email}}",
      "tags": ["tag-one", "tag-two"],
      "ipAllocationPolicy": {
        "useIPAliases": true,
        "clusterSecondaryRangeName": "cluster-range",
        "servicesSecondaryRangeName": "services-range"
      }
    },
    "privateEnvironmentConfig": {
      "enablePrivateEnvironment": true,
      "cloudSqlIPv4CidrBlock": "10.32.0.0/12",
      "webServerIPv4CidrBlock": "172.30.240.0/24",
      "privateClusterConfig": {
        "enablePrivateEndpoint": false,
        "masterIPv4CidrBlock": "172.18.50.0/28"
      }
    },
    "webServerNetworkAccessControl": {
      "allowedIPRanges": [
        {
          "value": "2001:0db8:0000:0042:0000:8a2e:0370:7334",
          "description": "example-address"
        }
      ]
    },
    "databaseConfig": {
      "machineType": "db-n1-standard-2"
    },
    "webServerConfig": {
      "machineType": "composer-n1-webserver-2"
    }
  },
  "labels": {
    "label-one": "value-one"
  }
}
