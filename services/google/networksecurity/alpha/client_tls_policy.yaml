# Copyright 2021 Google LLC. All Rights Reserved.
# 
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
# 
#     http://www.apache.org/licenses/LICENSE-2.0
# 
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
components:
  schemas:
    ClientTlsPolicy:
      properties:
        clientCertificate:
          description: Optional. Defines a mechanism to provision client identity
            (public and private keys) for peer to peer authentication. The presence
            of this dictates mTLS.
          properties:
            certificateProviderInstance:
              description: The certificate provider instance specification that will
                be passed to the data plane, which will be used to load necessary
                credential information.
              properties:
                pluginInstance:
                  description: Required. Plugin instance name, used to locate and
                    load CertificateProvider instance configuration. Set to "google_cloud_private_spiffe"
                    to use Certificate Authority Service certificate provider instance.
                  type: string
                  x-dcl-go-name: PluginInstance
              required:
              - pluginInstance
              type: object
              x-dcl-go-name: CertificateProviderInstance
              x-dcl-go-type: ClientTlsPolicyClientCertificateCertificateProviderInstance
            grpcEndpoint:
              description: gRPC specific configuration to access the gRPC server to
                obtain the cert and private key.
              properties:
                targetUri:
                  description: Required. The target URI of the gRPC endpoint. Only
                    UDS path is supported, and should start with “unix:”.
                  type: string
                  x-dcl-go-name: TargetUri
              required:
              - targetUri
              type: object
              x-dcl-go-name: GrpcEndpoint
              x-dcl-go-type: ClientTlsPolicyClientCertificateGrpcEndpoint
            localFilepath:
              description: Obtain certificates and private key from a locally mounted
                filesystem path.
              properties:
                certificatePath:
                  description: Required. The path to the file that has the certificate
                    containing public key.
                  type: string
                  x-dcl-go-name: CertificatePath
                privateKeyPath:
                  description: Required. The path to the file that has the private
                    key.
                  type: string
                  x-dcl-go-name: PrivateKeyPath
              required:
              - certificatePath
              - privateKeyPath
              type: object
              x-dcl-go-name: LocalFilepath
              x-dcl-go-type: ClientTlsPolicyClientCertificateLocalFilepath
          type: object
          x-dcl-go-name: ClientCertificate
          x-dcl-go-type: ClientTlsPolicyClientCertificate
        createTime:
          description: Output only. The timestamp when the resource was created.
          format: date-time
          readOnly: true
          type: string
          x-dcl-go-name: CreateTime
          x-kubernetes-immutable: true
        description:
          description: Optional. Free-text description of the resource.
          type: string
          x-dcl-go-name: Description
        labels:
          additionalProperties:
            type: string
          description: Optional. Set of label tags associated with the resource.
          type: object
          x-dcl-go-name: Labels
        location:
          description: The location for the resource
          type: string
          x-dcl-go-name: Location
          x-kubernetes-immutable: true
        name:
          description: Required. Name of the ClientTlsPolicy resource.
          type: string
          x-dcl-go-name: Name
          x-kubernetes-immutable: true
        project:
          description: The project for the resource
          type: string
          x-dcl-go-name: Project
          x-dcl-references:
          - field: name
            parent: true
            resource: Cloudresourcemanager/Project
          x-kubernetes-immutable: true
        serverValidationCa:
          description: Required. Defines the mechanism to obtain the Certificate Authority
            certificate to validate the server certificate.
          items:
            properties:
              caCertPath:
                description: The path to the file holding the CA certificate to validate
                  the client or server certificate.
                type: string
                x-dcl-go-name: CaCertPath
              certificateProviderInstance:
                description: The certificate provider instance specification that
                  will be passed to the data plane, which will be used to load necessary
                  credential information.
                properties:
                  pluginInstance:
                    description: Required. Plugin instance name, used to locate and
                      load CertificateProvider instance configuration. Set to "google_cloud_private_spiffe"
                      to use Certificate Authority Service certificate provider instance.
                    type: string
                    x-dcl-go-name: PluginInstance
                required:
                - pluginInstance
                type: object
                x-dcl-go-name: CertificateProviderInstance
                x-dcl-go-type: ClientTlsPolicyServerValidationCaCertificateProviderInstance
              grpcEndpoint:
                description: gRPC specific configuration to access the gRPC server
                  to obtain the CA certificate.
                properties:
                  targetUri:
                    description: Required. The target URI of the gRPC endpoint. Only
                      UDS path is supported, and should start with “unix:”.
                    type: string
                    x-dcl-go-name: TargetUri
                required:
                - targetUri
                type: object
                x-dcl-go-name: GrpcEndpoint
                x-dcl-go-type: ClientTlsPolicyServerValidationCaGrpcEndpoint
            type: object
            x-dcl-go-type: ClientTlsPolicyServerValidationCa
          type: array
          x-dcl-go-name: ServerValidationCa
          x-dcl-list-type: list
        sni:
          description: 'Optional. Server Name Indication string to present to the
            server during TLS handshake. E.g: "secure.example.com".'
          type: string
          x-dcl-go-name: Sni
        updateTime:
          description: Output only. The timestamp when the resource was updated.
          format: date-time
          readOnly: true
          type: string
          x-dcl-go-name: UpdateTime
          x-kubernetes-immutable: true
      required:
      - name
      - serverValidationCa
      - project
      - location
      title: ClientTlsPolicy
      type: object
      x-dcl-id: projects/{{project}}/locations/{{location}}/clientTlsPolicies/{{name}}
      x-dcl-labels: labels
      x-dcl-locations: []
      x-dcl-parent-container: project
      x-dcl-uses-state-hint: false
info:
  description: DCL Specification for the NetworkSecurity ClientTlsPolicy resource
  title: NetworkSecurity/ClientTlsPolicy
  x-dcl-has-iam: true
paths:
  apply:
    description: The function used to apply information about a ClientTlsPolicy
    parameters:
    - description: A full instance of a ClientTlsPolicy
      name: ClientTlsPolicy
      required: true
  delete:
    description: The function used to delete a ClientTlsPolicy
    parameters:
    - description: A full instance of a ClientTlsPolicy
      name: ClientTlsPolicy
      required: true
  deleteAll:
    description: The function used to delete all ClientTlsPolicy
    parameters:
    - name: project
      required: true
      schema:
        type: string
    - name: location
      required: true
      schema:
        type: string
  get:
    description: The function used to get information about a ClientTlsPolicy
    parameters:
    - description: A full instance of a ClientTlsPolicy
      name: ClientTlsPolicy
      required: true
  list:
    description: The function used to list information about many ClientTlsPolicy
    parameters:
    - name: project
      required: true
      schema:
        type: string
    - name: location
      required: true
      schema:
        type: string
